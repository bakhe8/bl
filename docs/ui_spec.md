# وثيقة واجهة المستخدم — أولوية 3/5

## الصفحات/الشاشات
- **صفحة رفع الملف**: رفع ملف Excel واحد، عرض تنبيهات الأعمدة المفقودة، زر بدء المعالجة.
- **صفحة القرارات**: عرض الصفوف غير المحسومة فقط، خيارات مطابقة للبنك والمورد، حقول تعديل سريعة، أزرار حفظ/تطبيق على الكل، مؤشرات ثقة (عند استخدام Fuzzy).
- **صفحة عرض الخطاب**: معاينة الخطاب النهائي، زر طباعة/حفظ PDF، مراجعة الحقول الرئيسية قبل الإخراج.
- **قائمة السجلات الجاهزة**: جدول للبنود التي تم حسمها مع زر عرض الخطاب لكل صف.

## العناصر المشتركة
- أزرار استيراد/تصدير القاموس (JSON) وحفظ column mapping.
- تنبيهات واضحة للأخطاء (ملف غير مدعوم، أعمدة ناقصة، تواريخ غير صالحة).
- مسار خطي: تحميل → قرارات → معاينة/طباعة.
- دعم إمكانية الوصول: تباين كافٍ، ترتيب تبويب واضح، `lang="ar"` و RTL على مستوى الصفحة، ورسائل أخطاء عربية موحدة قابلة للقراءة من قارئ الشاشة.
- حالات خطأ إضافية: ملف فارغ، حجم/صفوف تتجاوز الحد، ملفات XLSM مرفوضة.
- معايير WCAG: نسبة تباين 4.5:1 على الأقل، واستخدام الأزرار/الروابط بمعانيها، ودعم تنقل لوحة المفاتيح (Tab/Shift+Tab).
- لا توجد شاشة مراجعة إضافية قبل الطباعة؛ المستخدم يفتح الخطاب ويتحمل المراجعة النهائية.
- تخطيط الواجهة (بسيط من التعليمات): رأس صغير، زر تحميل Excel، مربع تنبيهات/أخطاء مختصر، جدول صفوف غامضة (بنك خام/مورد خام/حالة)، بطاقة تفاصيل للسجل المحدد (قراءة فقط)، وبطاقة معاينة خطاب داخل المودال نفسه. لا تبويبات ولا شاشات فرعية.

## رحلة المستخدم المختصرة
1) رفع ملف Excel (يظهر اسم الملف + زر بدء التحليل).
2) تقرير الأعمدة والمشكلات.
3) عرض الصفوف الغامضة للقرار (بجداول تضم رقم الصف، البنك الخام + اختيار رسمي، المورد الخام + اختيار رسمي).
4) حفظ القرارات في القاموس (variants) زر لكل صف وزر شامل لحفظ القواميس.
5) قائمة السجلات الجاهزة مع أزرار عرض الخطاب.
6) تجهيز معاينة الخطاب ثم الطباعة/التصدير.

## رسائل الخطأ والتنبيه الموحدة (أمثلة)
- "تعذّر قراءة عمود (اسم المورد). الرجاء تحديد العمود الصحيح."
- "لا يمكن قراءة الملف: الصيغة غير مدعومة (XLSM). الرجاء رفع ملف XLSX."
- "الحجم يتجاوز الحد المسموح (1MB). الرجاء تقليل البيانات."
- "تعذّر قراءة الملف: صيغة الترميز غير معتمدة (UTF-8 فقط)."
- "اسم البنك غير مطابق للقاموس الرسمي. الرجاء اختيار البنك الصحيح."
- "المورد غير معروف في القاموس. هل تريد إضافته؟ (لا يوجد تراجع)."
- "اسم البنك الإنجليزي يحتاج اختيار يدوي للبنك العربي الرسمي."
- "سيتم إنشاء variant جديد لهذا الاسم. الرجاء التأكيد (لا يوجد زر تراجع)."
