# وثيقة واجهة المستخدم — أولوية 3/5

## الشاشات (كلها في صفحة واحدة)
- **رفع الملف**: تحميل Excel، زر بدء التحليل، تنبيهات الأعمدة/الحجم.
- **القرارات**: جدول الصفوف (غامضة + جاهزة)، سطر موسّع تحت الصف المحدد يحوي قوائم/حقول اختيار البنك والمورد، زر حفظ لكل صف.
- **تفاصيل السجل**: بطاقة قراءة فقط للسطر المحدد.
- **معاينة الخطاب**: بطاقة ثابتة تعرض الخطاب تلقائياً للصف المحدد دون زر منفصل.

## العناصر المشتركة
- تنبيهات واضحة للأخطاء (ملف غير مدعوم، أعمدة ناقصة، تواريخ غير صالحة).
- مسار خطي: تحميل → قرارات (سطر موسّع في الجدول) → معاينة/طباعة تلقائية.
- دعم إمكانية الوصول: تباين كافٍ، ترتيب تبويب واضح، `lang="ar"` و RTL على مستوى الصفحة، ورسائل أخطاء عربية موحدة قابلة للقراءة من قارئ الشاشة.
- حالات خطأ إضافية: ملف فارغ، حجم/صفوف تتجاوز الحد، ملفات XLSM مرفوضة.
- معايير WCAG: نسبة تباين 4.5:1، واستخدام الأزرار/الروابط بمعانيها، ودعم تنقل لوحة المفاتيح (Tab/Shift+Tab).
- لا تبويبات ولا شاشات فرعية؛ كل شيء في صفحة واحدة، والمعاينة تظهر تلقائياً للصف المحدد.

## رحلة المستخدم المختصرة
1) رفع ملف Excel (يظهر اسم الملف + زر بدء التحليل).
2) تقرير الأعمدة والمشكلات.
3) عرض الصفوف الغامضة للقرار (بجداول تضم رقم الصف، البنك الخام + اختيار رسمي، المورد الخام + اختيار رسمي).
4) حفظ القرارات في القاموس (variants) زر لكل صف وزر شامل لحفظ القواميس.
5) قائمة السجلات الجاهزة مع أزرار عرض الخطاب.
6) تجهيز معاينة الخطاب ثم الطباعة/التصدير.

## رسائل الخطأ والتنبيه الموحدة (أمثلة)
- "تعذّر قراءة عمود (اسم المورد). الرجاء تحديد العمود الصحيح."
- "لا يمكن قراءة الملف: الصيغة غير مدعومة (XLSM). الرجاء رفع ملف XLSX."
- "الحجم يتجاوز الحد المسموح (1MB). الرجاء تقليل البيانات."
- "تعذّر قراءة الملف: صيغة الترميز غير معتمدة (UTF-8 فقط)."
- "اسم البنك غير مطابق للقاموس الرسمي. الرجاء اختيار البنك الصحيح."
- "المورد غير معروف في القاموس. هل تريد إضافته؟ (لا يوجد تراجع)."
- "اسم البنك الإنجليزي يحتاج اختيار يدوي للبنك العربي الرسمي."
- "سيتم إنشاء variant جديد لهذا الاسم. الرجاء التأكيد (لا يوجد زر تراجع)."
