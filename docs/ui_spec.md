# وثيقة واجهة المستخدم — أولوية 3/5

## الشاشات (كلها في صفحة واحدة)
- **رفع الملف + التنبيهات (أعلى الصفحة بعرض كامل)**: تحميل Excel، زر بدء التحليل بمحاذاة حقل التحميل، تنبيهات الأعمدة/الحجم إلى جواره.
- **القرارات (عمود أيمن)**: جدول الصفوف (غامضة + جاهزة) مع سطر موسّع تحت الصف المحدد، يعرض فقط الحقول التي تحتاج قرار (بنك أو مورد أو كلاهما)، وزر حفظ في نفس السطر.
- **تفاصيل السجل + المعاينة (عمود أيسر)**: بطاقات ثابتة تعرض تفاصيل السطر المحدد ومعاينة الخطاب تلقائياً.

## العناصر المشتركة
- تنبيهات واضحة للأخطاء (ملف غير مدعوم، أعمدة ناقصة، تواريخ غير صالحة، فشل تحويل تاريخ الانتهاء).
- مسار خطي: تحميل → قرارات (صف موسّع) → معاينة/طباعة تلقائية.
- دعم إمكانية الوصول: تباين محسّن، ترتيب تبويب واضح، `lang="ar"` و RTL، ورسائل أخطاء عربية.
- حالات خطأ إضافية: ملف فارغ، حجم/صفوف تتجاوز الحد، ملفات XLSM مرفوضة.
- معايير WCAG: نسبة تباين 4.5:1، واستخدام الأزرار/الروابط بمعانيها، ودعم تنقل لوحة المفاتيح (Tab/Shift+Tab).
- لا تبويبات ولا شاشات فرعية؛ كل شيء في صفحة واحدة، والمعاينة تظهر تلقائياً للصف المحدد.

## رحلة المستخدم المختصرة
1) رفع ملف Excel (يظهر اسم الملف + زر بدء التحليل).
2) تقرير الأعمدة والمشكلات.
3) عرض الصفوف الغامضة للقرار (بجداول تضم رقم الصف، البنك الخام + اختيار رسمي، المورد الخام + اختيار رسمي).
4) حفظ القرارات في القاموس (variants) زر لكل صف وزر شامل لحفظ القواميس.
5) قائمة السجلات الجاهزة مع أزرار عرض الخطاب.
6) تجهيز معاينة الخطاب ثم الطباعة/التصدير.

## رسائل الخطأ والتنبيه الموحدة (أمثلة)
- "تعذّر قراءة عمود (اسم المورد). الرجاء تحديد العمود الصحيح."
- "لا يمكن قراءة الملف: الصيغة غير مدعومة (XLSM). الرجاء رفع ملف XLSX."
- "الحجم يتجاوز الحد المسموح (1MB). الرجاء تقليل البيانات."
- "تعذّر قراءة الملف: صيغة الترميز غير معتمدة (UTF-8 فقط)."
- "اسم البنك غير مطابق للقاموس الرسمي. الرجاء اختيار البنك الصحيح."
- "المورد غير معروف في القاموس. هل تريد إضافته؟ (لا يوجد تراجع)."
- "اسم البنك الإنجليزي يحتاج اختيار يدوي للبنك العربي الرسمي."
- "سيتم إنشاء variant جديد لهذا الاسم. الرجاء التأكيد (لا يوجد زر تراجع)."
