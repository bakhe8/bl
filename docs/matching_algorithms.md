# وثيقة خوارزميات التطابق — أولوية 4/5

## طبقات التطابق
1) تطابق مباشر مع القواميس الرسمية (عربي/إنجليزي).
2) تطابق باستخدام الـ variants (أخطاء شائعة، اختصارات، لغات مختلفة).
3) ترشيح بسيط أو Fuzzy محدود (اختياري) عند تباين بسيط (مثلاً Levenshtein ≤ 2 أو تشابه ≥ 0.85).

## إدارة الغموض
- الصفوف غير المحسومة تُعرض في شاشة القرارات.
- عرض خيارات مقترحة للمستخدم مع اعتماد قراره كـ variant جديد.
- لا تغيير تلقائي عند ثقة < 0.8؛ يلزم قرار صريح.
- عند تعدد تطابقات محتملة بدرجات متقاربة، اعرضها مرتبة بالثقة ودعم بحث سريع.

## حفظ القرار
- كل قرار (variant → official) يُحفظ في LocalStorage ويُصدَّر/يُستورد عبر JSON.
- احتفظ باللغة/المصدر لتجنب تصادم الأسماء المتشابهة.
- دمج الـ variants المتقاربة (بعد التطبيع) بشكل دوري لتجنب التضخم والحفاظ على الحجم.

## جودة التطابق
- حد أدنى للتشابه قبل اعتماد Fuzzy.
- استخدام سياق إضافي (مبلغ/تاريخ/رقم ضمان) للمساعدة في القرار اليدوي عند اللزوم.
