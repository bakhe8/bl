# وثيقة الحماية والنسخ الاحتياطي — أولوية 2/5

## الحفظ
- القواميس (رسمية + variants) تُخزَّن في LocalStorage أثناء التشغيل.
- حفظ column mapping في ملف JSON ضمن `saved-config/`.
- لا تُرسل أي بيانات إلى خوادم خارجية.
- احسب `schemaVersion` و`checksum` (اختياري) لملفات JSON عند التصدير لضمان السلامة عند الاستيراد.

## النسخ الاحتياطي
- تصدير القواميس وملفات الإعداد (column mapping) إلى JSON دوريًا (أسبوعياً على الأقل).
- الاحتفاظ بنسخة في موقع آمن/مشترك عند العمل على عدة أجهزة.
- يمكن الاحتفاظ بالملفات الأربعة (`banks_official/variants`, `suppliers_official/variants`) مع ملف mapping كحزمة واحدة للترحيل بين الأجهزة.

## الاستعادة
- استيراد ملف JSON لإعادة القاموس والإعدادات بعد فقد بيانات المتصفح أو تغيير الجهاز.
- تأكيد تطابق الإصدار/البنية قبل الاستيراد لتفادي التعارضات.

## سيناريوهات الفقد
- حذف بيانات المتصفح → استيراد النسخة الاحتياطية.
- تغيير الجهاز → استيراد النسخ قبل بدء العمل.
- ترقية التطبيق → اختبار الاستيراد/التصدير بعد الترقية لضمان التوافق.
- تجاوز حدود LocalStorage (~5–10MB) → تحذير المستخدم مع اقتراح حذف variants غير الضرورية أو استخدام ملف JSON خارجي أكبر.
