# وثيقة الحماية والنسخ الاحتياطي — أولوية 2/5

## الحفظ
- البنوك: قراءة فقط من `src/data/dictionaries/banks.json` (لا حفظ محلي ولا تعلّم).
- الموردون: يتم تحميل البذرة من `variants_suppliers.json` إلى LocalStorage تحت المفتاح `bgl_supplier_variants`، ثم تُحدَّث بتعلم المستخدم.
- يمكن حفظ column mapping (إن وجد) في ملف JSON ضمن `saved-config/`.
- لا تُرسل أي بيانات إلى خوادم خارجية.
- يُفضَّل تضمين `schemaVersion` و`checksum` في ملفات JSON عند التصدير للتحقق عند الاستيراد.

## النسخ الاحتياطي
- صدّر ملفات JSON التالية كحزمة: `banks.json` (ثابت)، `suppliers.json` (رسمي)، ونسخة من LocalStorage للموردين (variants) + أي column mapping.
- حد تشغيلي مقترح لـ LocalStorage (الموردون فقط): 4MB، تحذير عند 90% (~3.6MB). إذا زاد الحجم: دمج المتقارب أو اعتمد على ملف JSON خارجي أكبر.
- لا يوجد Auto-Backup؛ تحذير للمستخدم بأن حذف بيانات المتصفح يمسح تعلم الموردين.

## الاستعادة
- استيراد القواميس الرسمية (عند الحاجة) + JSON المصدَّر لبيانات الموردين (variants) لإعادة بناء LocalStorage.
- تحقق من `version/schemaVersion` عند الاستيراد لتفادي التعارضات.

## سيناريوهات الفقد
- حذف بيانات المتصفح → استيراد النسخة الاحتياطية الخاصة بالموردين.
- تغيير الجهاز → استيراد النسخ قبل بدء العمل.
- ترقية التطبيق → اختبار الاستيراد/التصدير بعد الترقية لضمان التوافق.
- تجاوز حد LocalStorage → تحذير المستخدم مع اقتراح دمج/تصدير variants أو الاعتماد على ملف JSON خارجي.
